![yamdb_final workflow](https://github.com/chief1978/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)
# Проект YaMDb
## О проекте
Учебный проект API для YaMDB. Выполнено в рамках групового проекта 15 спринта курса Python-разработчик [Япрактикум](https://practicum.yandex.ru/)
## Описание
Проект YaMDb собирает отзывы (*Review*) пользователей на произведения (*Titles*).

Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список категорий (*Category*) может быть расширен администратором (например, можно добавить категорию «Изобразительное искусство» или «Ювелирка»).

Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.

В каждой категории есть произведения: книги, фильмы или музыка. Например, в категории «Книги» могут быть произведения «Винни-Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Насекомые» и вторая сюита Баха.

Произведению может быть присвоен жанр (*Genre*) из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»). Новые жанры может создавать только администратор.

Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы (*Review*) и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв. 
## Технологии
- [`python 3.9.7`]
- [`django 2.2.16`](https://www.djangoproject.com/)
- [`django-rest-framework`](https://www.django-rest-framework.org/)
- [`postgres`]
- [`nginx`]
## Структура проекта
```
/api_yamdb/
```
Код приложения, файл зависимостей, dockerfile для развертывания приложения
```
/infra/
```
Директория с файлами для развёртывания инфраструктуры
## Запуск проекта
### .env файл
Для запуска потребуется `.env` файл в директории infra с переменными окружения:
```
DB_ENGINE=django.db.backends.postgresql
```
Движок базы данных, используем postgres
```
DB_NAME=postgres
```
Имя базы данных
```
POSTGRES_USER=postgres
```
Пользователь базы данных
```
POSTGRES_PASSWORD=Very_Strong_Password_Change_Me
```
Пароль пользователя БД, необходимо поменять на что-нибудь безопасное
```
DB_HOST=db
```
Хост БД
```
DB_PORT=5432
```
Порт БД
```
SECRET_KEY=Very_Strong_Password_Change_Me
```
Секретный ключ Django, необходимо поменять на что-нибудь безопасное
```
ALLOWED_HOSTS=*
```
Список разрешенных имен, которые будет обслуживать приложение, можно оставить `*`, или указать доменные имена и\или ip-адреса через запятую
### Запуск приложения в контейнерах
Для запуска приложения в контейнерах используйте следующие команды:подготовлен файл build_and_run.sh в директории `infra`. После его запуска требуется ввести данные суперпользователя (логин, пароль). Всё остальное выполниться автоматически.
Сборка и запуск контейнеров:
```
docker-compose up -d
```
Выполнить миграции:
```
docker-compose exec web python manage.py migrate
```
Создать суперпользователя
```
docker-compose exec web python manage.py createsuperuser
```
Сборка статики
```
docker-compose exec web python manage.py collectstatic --no-input
```
### Загрузка данных
В директории `infra` подготовлен файл с данными - `fixtures.json`. 
Скопируйте файл в контейнер приложения:
```
docker compose cp ./fixtures.json web:app/fixtures.json
```
и загрузите данные:
```
docker-compose exec web python manage.py loaddata fixtures.json 
```
## Документация
После запуска приложения документация API доступна по адресу:
- swagger
[/swagger/](http://127.0.0.1/swagger/)
- redoc
[/redoc/](http://127.0.0.1/redoc/)
- Админка
[/admin/](http://127.0.0.1/admin/)
## Авторы
Дарья, Антон, Александр
